
<app-header></app-header>
<div class = "row ">
 
    <section class = "col-2 ml-5" style = "height: 90%; ">
        <div class = "text-center  ml-3" style = "margin-top: 180px;">
            
            <h3 class = mt-4>{{currentUser.name}}</h3>
            <p class = mt-5> Medical Institution</p>
            <h4 class = "text-success">{{currentUser.professionalDetails.medicalInstitution}}</h4>
            <p class = mt-4>Years of Residency</p>
            <h4 class = "text-success">{{currentUser.professionalDetails.yearsOfResidency}}</h4>
            <h3 class = "mt-5">Latest Test Score</h3>
            <h4 class = "text-warning">{{latestGrade}}</h4>
            <h3 class = "mt-3">Test score average</h3>
            <h4 class = "text-success">{{testAverage}}</h4>
        </div>    
      </section>
    <article class = 'col-6 ' style = "height: 90%; border-left: black;">
      <h2 class = "mt-5">Graded Tests</h2>
      <table class="table  mx-3 ">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope = "col">Test Name</th>
            <th class = "text-center" scope = "col">Test Id#</th>
            <th class = "text-center" scope="col">Grade</th>
            <th class = "text-center" scope="col">Get test</th>
            
          </tr>
        </thead>
        
        <tbody>
          <tr *ngFor = "let test of gradedTests; let i = index">
            <th scope="row">{{i+1}}</th>
            <td >{{test.name}}</td>
            <td class = "text-center">{{test.id}}</td>
            <td>
              <div class = "text-success text-center ">{{test.grade}}</div>
            </td>
            <td>
              <div class = "text-center">              
                <a href={{test.testUrl}} ><button class = "btn border-success ">get test</button></a>  
            </div>
                
            </td>
          
          </tr>
          
        </tbody>
      </table> 
      <div *ngIf = "gradedTests.length == 0"><h5>No tests have been graded yet</h5></div>

      <h2 class = "mt-5">Tests To Be Taken</h2>
      <table class="table  mx-3 ">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope = "col">Test Name</th>
                <th class = "text-center" scope = "col">Test Id#</th> 
                <th class = "text-center" scope="col">Get Test</th>
                <th  class = "text-center" scope="col">
                  <div class = "ml-5" >Submit Test</div>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor = "let test of tests; let i = index">
                <th scope="row">{{i+1}}</th>
                <td >{{test.name}}</td>
                <td class = "text-center">{{test.id}}</td>
                
                <td class = "text-center">
                  <a href={{test.testUrl}} ><button class = "btn border-success">get test</button></a>  
                    
                </td>
                <td >
                  <div class = 'justify-content-center drop-box' appDragdrop (click)= "fileinput.click()" (fileDropped)= "upload($event, test)" style="margin-left: 165px;">
                    <input  type="file" hidden #fileinput (change) = "upload($event)">
                    <img class = "text-center" src = "../../../../assets/upload2.png" style = "height: 35px; width: 35px;  margin-top: 2px; margin-left: 60px;" >
                  </div>
                    
                </td>
              </tr>
              
            </tbody>
          </table>
          <div *ngIf = "tests.length == 0"><h5>There currently are no more tests to be taken</h5></div>
    </article>
    
        <article class = "col-3 mt-5">
            <h3 class = "text-center"> Latest Test Results</h3>
            <div style="display: block;">
              <canvas baseChart width="400" height="400"
                [datasets]="lineChartData"
                [labels]="lineChartLabels"
                [options]="lineChartOptions"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
                [plugins]="lineChartPlugins">
              </canvas>
            </div>
            <h3 class = "text-center mt-3"> All Test Results</h3>
            <div style="display: block;">
              <canvas baseChart width="400" height="400"
                [datasets]="lineChartData2"
                [labels]="lineChartLabels2"
                [options]="lineChartOptions"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
                [plugins]="lineChartPlugins">
              </canvas>
            </div>
        </article>
</div>  
    

